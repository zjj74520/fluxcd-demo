provider "kubernetes" {
  host = "https://192.168.189.3:6443"
  client_certificate     = base64decode("LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURJVENDQWdtZ0F3SUJBZ0lJWC8wTjd6bVl5VG93RFFZSktvWklodmNOQVFFTEJRQXdGVEVUTUJFR0ExVUUKQXhNS2EzVmlaWEp1WlhSbGN6QWVGdzB5TXpBek1UTXhOakkxTXpOYUZ3MHlOREF6TVRJeE5qSTFNelZhTURReApGekFWQmdOVkJBb1REbk41YzNSbGJUcHRZWE4wWlhKek1Sa3dGd1lEVlFRREV4QnJkV0psY201bGRHVnpMV0ZrCmJXbHVNSUlCSWpBTkJna3Foa2lHOXcwQkFRRUZBQU9DQVE4QU1JSUJDZ0tDQVFFQTh1S3p1bHhIZHU1K1pJMXUKRDFyN3JjbzZVNTBPVUFjQXV2QlNOSUoyeS9qditwZjVyVHdGdHU4eE5tekp0SU9hbkxWSk5rWVBSRlNEU3FYbQpLZEY3MENSVjZpU1hBR3djbGpZS2wrNEtnd3dRUGJzZlVwVnZMUmtkMlRMcmZPcENzcHRvY0VTQ2R1UWFrejNwClJqWFNNOTBQS2pXSlpYUzY4TlBpcHphbzU5aWk0d2VnYURMQnl2d0hqS25vRE9XMVJPK1JQNlRCM244cUYwa3AKVzA5RUI2T0R1RzhPQlZUc2VzSDl2N2NXQW5tbld2M3FLd25Ia0Z4cUs1SXpIclRJNzI4bE5pQld3T1FiRkEzagpZYXJhS2t0UGVvamcwS2J4dis2Q095M1kvZGpVdTVKQVI5RHBsS2Z4eDNtVVluME9aQUx3ZVRGT2xqYVpBWXAvCnVOOFBsd0lEQVFBQm8xWXdWREFPQmdOVkhROEJBZjhFQkFNQ0JhQXdFd1lEVlIwbEJBd3dDZ1lJS3dZQkJRVUgKQXdJd0RBWURWUjBUQVFIL0JBSXdBREFmQmdOVkhTTUVHREFXZ0JTVHJDY1g1SlJGRmVBWUxyYXJsRUEwTWpyQwpkekFOQmdrcWhraUc5dzBCQVFzRkFBT0NBUUVBRnVQTHVEbTBmazY3TjBRTDJtbFQ3TUVDMWlCcVNPcEx3bHBsCndyL0xEdGhEUDJVMEcyUzhwSmR1eEZ6UUJaWkVMR2dEOTZLTjNGQXpkN3prTjJrdFh0OEpzSk15UUtOenMrWDEKQUZ0N3dqbVFrelpSa1ZRei83NkNnVGtBUGNXZTRnc25CVFZOQ0NsSmdjTnU1QXJuUkZaQitKaDEwN094Wk5UWgpkMjV2a1V4REhKUUNpMkcxTHZzWXZxR3FnYU54clZ6bnJaN0lSeUhVQ0pONTdFZTRVSldDQTFlUTdGRm9paGRwCm9Ba1dBMFh4a0FTaWN2WXNZMzAvTDRDM2JvN0dFZmhrUllwL2x4T0FKZDVpdDdwOEJqcUlHdUZuRUhJNG9OTEgKaVRxR2k5S3pSNFA0azBrMGxyWVo3SjBLQmY2TGFROEFheUk2N3NONUJ4OHN3RksyWWc9PQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==")
  client_key             = base64decode("LS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQpNSUlFb3dJQkFBS0NBUUVBOHVLenVseEhkdTUrWkkxdUQxcjdyY282VTUwT1VBY0F1dkJTTklKMnkvanYrcGY1CnJUd0Z0dTh4Tm16SnRJT2FuTFZKTmtZUFJGU0RTcVhtS2RGNzBDUlY2aVNYQUd3Y2xqWUtsKzRLZ3d3UVBic2YKVXBWdkxSa2QyVExyZk9wQ3NwdG9jRVNDZHVRYWt6M3BSalhTTTkwUEtqV0paWFM2OE5QaXB6YW81OWlpNHdlZwphRExCeXZ3SGpLbm9ET1cxUk8rUlA2VEIzbjhxRjBrcFcwOUVCNk9EdUc4T0JWVHNlc0g5djdjV0FubW5XdjNxCkt3bkhrRnhxSzVJekhyVEk3MjhsTmlCV3dPUWJGQTNqWWFyYUtrdFBlb2pnMEtieHYrNkNPeTNZL2RqVXU1SkEKUjlEcGxLZnh4M21VWW4wT1pBTHdlVEZPbGphWkFZcC91TjhQbHdJREFRQUJBb0lCQUdwMS8vMXhzVWxxSkRDQwo1WGtKa2tPTTNxQUR1V0JPa1gxZkZVazYza050ckJLVlJyVXVGL3NsUU5id1BFRkpaaDNHUUg3dm1vV0MzY0Y4CmtqUkdSQlRwdUZiWER2RDZjbFZNL3J1MWRSb1gwWTZkVkk5b1BNRHh2Mm1TcmpHa3BQT1F0dWh1dnhqSnh2US8KTU42N2ZKV0xFYmlZbXM3RHFhVWgycmtjZGxDWWc4T1FXak4yalM3eVdRY250cmpnWktYSDU4czROcDd5RG5EYgp0ZVFlZFdUWmQzcTZ0WVIzbXJKYVFSY0xWL0U5VkhUcmJ6cnREVnRzNkI3ZWU0eVE5dGZEUmtPQ0xKVkpXUzBGClRsU2VJRnJCTVpVVTlSSGRySllEYWZiVzZtY0c4YnVsT0xkL2NCVUtLWGlYMFRFV0pxRWVjNjY2LzV1RmdySjUKdEtYTkVJRUNnWUVBK25NcXZINDBadVNOMDZsYlpJZFB4Y25NTXlkMHdndzNOanZQRTBwNk5GM3lES0hKOEx4dQorUVFidGg2NGZWdWdSMkVHc1JlOG1VYzhmeGxZc2NDWVJ2bmFXNyt4NDExNU1IOXZrK3V6bzhzV2orZW1aTWZ2CkI2RkRURVQzcEp0LzBDRXFEZFliUjZkQUJNZ1A0eXdIalZnRHN3MHFyb2ZhWGtBS20wcE9TU0VDZ1lFQStFU2YKTCtwWDVSdk1ab2QwaUZRMFZudGRiRGZ5OUhtc2plWDVRQzh6Vlp2V0xjZEIwU3JvdEF3dVMrVWN3MGZSLzZmVgo3VnVPUlIwRzNNTEhrc1didUVMaGlQaE8xTFc2UHJSYm5zL2hyRC9KZ0Rud3ROU1lmTStEcVJUOE5xWDFWMzdPCndDdTdsdDliMnNzSkpOT0NKTDY5Y2l0Uit2T2gvVEYvMUM1aXFiY0NnWUJSK3BpbWtuajhwUnQzaVJ3TlQrMWcKeEtrK3BVK21wUEQ5bzU0b3BseFIvOTVYSEM1SnlxUllobXU3dFZxV1RnT3MyYW1qRmkzNXprT1RKdXpOWWtsMgpFaHJUcFcvSkNMTyttRGdocHlscUYvUU9ycmpjakVWRnJoZWxRMzM4TjVvaXVuaFZoeHZ1M0dRc0xJQm16K2E0CjhYSmtqWTdIQ2xrRU9Oby84cGFsZ1FLQmdRQzlRMHI3c3pISVpoVy92OW0xcUVPeC9oL3RSUVhCSEJUUXBCWU0KdVM3d1AzbmFza0Zabk5XRGxKbWlvQW42VVFFbFhhUjNhMG1kSkpDN3NQMkZ4WUY5eWZhM2ZWeFRTaXF1Ykw0Lwo1b2hLME9IakQ4aVJnbFN4S1YxY2c3UDJVVFFrdkhZUENBZmM3Mi9ON3VTTW4zVmlYOHA2ZzgzZWV1YnQ1MU5rCnhPdlFKd0tCZ0VuTE92RllYWEp5VUl2VVVHS2dncG53c2pqQmd0YmhIK0thMUJnQkQ1Q0x6T2dyRFI3aEJxWHIKck1sdXpGS2V3RVFiaTEwN1ptd243R0dkMDZXTkN4MkdDZ1lqYytUSmIwUnNmN1l6Tm9SNTdzSUROaDE1NUpXSQpwU2dtZVNEdVJxUEdsS3ZEUUVQc1ZDMGljaTZtYnZESDJoeG1VQXdEYTA3bDFxdk5yVjQvCi0tLS0tRU5EIFJTQSBQUklWQVRFIEtFWS0tLS0tCg==") 
  cluster_ca_certificate = base64decode("LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUM1ekNDQWMrZ0F3SUJBZ0lCQURBTkJna3Foa2lHOXcwQkFRc0ZBREFWTVJNd0VRWURWUVFERXdwcmRXSmwKY201bGRHVnpNQjRYRFRJek1ETXhNekUyTWpVek0xb1hEVE16TURNeE1ERTJNalV6TTFvd0ZURVRNQkVHQTFVRQpBeE1LYTNWaVpYSnVaWFJsY3pDQ0FTSXdEUVlKS29aSWh2Y05BUUVCQlFBRGdnRVBBRENDQVFvQ2dnRUJBTFl2CitWbDB2Snc3RDB3aHBVdkR1aXhXeEhMVFVqQXd5Sy9SdHhOQlZZcytVelM2ajJBaDNmL25tMTdGV1ozNnkwcDEKVTU1V1I3TllKTmR6VDkxYXM5MjRVUWRwZjRnMlBRanN0S1ZTbklra2c2VnBVbXJGQWdvNkFCVHRmb0FMVEJlMgp3U2NCVmM4NFYvc0x3WmM2akloUTFOTTBSUUhiQVRmMWo2UDZEa09ObzBocCswZndpL1c0MHRlR2xoTVR4RW5wCm0zNUE5ZWcyaGVlejhjTmptRTAwM2ZIVUtSRkd0Y0NLT3JhejdOQlVRc0ZtLzZFdUFDSzYvbmtFL2FVZ0JvL3kKS1FZRk11bXBsMGhpZmplM1VqLzlRYVlVUVlRczdqMGU2SHQxekxEUHJXaEl4RGNSUjJ3S1BVUW1GU3lxZWdIWApaeTFSSjJsM0hLKzNmNWVXNHpNQ0F3RUFBYU5DTUVBd0RnWURWUjBQQVFIL0JBUURBZ0trTUE4R0ExVWRFd0VCCi93UUZNQU1CQWY4d0hRWURWUjBPQkJZRUZKT3NKeGZrbEVVVjRCZ3V0cXVVUURReU9zSjNNQTBHQ1NxR1NJYjMKRFFFQkN3VUFBNElCQVFCVitJeFdiUDU4aVNVeDluemZ2bUhCNG9BaUNmZTF4VlU2R0srYktVaFlEa29GTlptRApCeUhxODVuMDVSQ2ZDdURWSlNMWjVzWE1zMGh6YU1TYWR4MHJBVUJsY2VkK09YeGdoUWZkaHFOYkNMWStEa1MyCk1MalNhRWg2OFA3NnlQaXY3SmlmK1F6VTllbGNNdDJ3RWlGTUxuQndwT0lBWTJQNmpvdWw1NEFNenFHRXBhdE0KSFN0TlEyc2RINkRIL08zUGd1MWFDMll2aXlOZ2RNSUxSUDVpMmRaMWY0VUkxTDNDVjJib1FneW5VSWhKMjh1UgpZVEFwUlFnd2JkeFB4ODdsTUN1TDJlKzBYWTg4TEtjdjRyVFZRbGRmNURmRTRlbDVwK0hZcGdXRWo1WVFSY1VmCk1FRXQwYld4T2xYdUxNRVptVzFIMHpST24yWmpPOXh5REZVSQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==")
}





resource "kubernetes_namespace" "test" {
  metadata {
    name = "mysvn"
  }
}


resource "kubernetes_deployment" "test" {
  metadata {
    name      = "svn"
    namespace = kubernetes_namespace.test.metadata[0].name
  }
  spec {
    replicas = 2
    selector {
      match_labels = {
        app = "MyTestApp"
      }
    }
    template {
      metadata {
        labels = {
          app = "MyTestApp"
        }
      }
      spec {
        container {
          image = "witersencom/svnadmin:2.5.3"
          name  = "svn-container123123"
          port {
            container_port = 80
          }
        }
      }
    }
  }
}


resource "kubernetes_service" "test" {
  metadata {
    name      = "svn"
    namespace = kubernetes_namespace.test.metadata[0].name
  }
  spec {
    selector = {
      app = kubernetes_deployment.test.spec[0].template[0].metadata[0].labels.app
    }
    type = "NodePort"
    port {
      node_port   = 30202
      port        = 80
      target_port = 80
    }
  }
}











